# Template file for 'intel-graphics-compiler-bin'
pkgname=intel-graphics-compiler-bin
version=1.0.7181
revision=1
archs="x86_64"
depends="zlib libgcc"
short_desc="Intel Graphics Compiler for OpenCL (pre-compiled binaries)"
maintainer="Lucas L. Treffenst√§dt <lucas@treffenstaedt.de>"
license="MIT"
homepage="https://github.com/intel/intel-graphics-compiler/"
distfiles="https://github.com/intel/intel-graphics-compiler/releases/download/igc-${version}/intel-igc-core_${version}_amd64.deb
 https://github.com/intel/intel-graphics-compiler/releases/download/igc-${version}/intel-igc-media_${version}_amd64.deb
 https://github.com/intel/intel-graphics-compiler/releases/download/igc-${version}/intel-igc-opencl-devel_${version}_amd64.deb
 https://github.com/intel/intel-graphics-compiler/releases/download/igc-${version}/intel-igc-opencl_${version}_amd64.deb"
checksum="49850dabd50c8c6f28b27d9c4561afcbacd53d7e97f141c0adefe2bd567cd46b
 0a1b7d90aa0cbc0b46ca903874759835b7bbd4862f43ee90bcb7a8d225fbcd17
 93b10ff013223c139e1cb97b64fc99201d14f5dcccf6be299cfaca279b70a0b6
 f08aff6c07369ecb4758f0385eedc5b8db096d9219b5013217c05f6008a3f1e4
 0ddcc820928d5fc03b6c1271de8c0f9e9be74717f872956cc3fc4ae25eca9d9"
nostrip=yes

do_extract() {
	ar p ${XBPS_SRCDISTDIR}/${pkgname}-${version}/intel-igc-core_${version}_amd64.deb \
		data.tar.gz | bsdtar -x -f -
	ar p ${XBPS_SRCDISTDIR}/${pkgname}-${version}/intel-igc-media_${version}_amd64.deb \
		data.tar.gz | bsdtar -x -f -
	ar p ${XBPS_SRCDISTDIR}/${pkgname}-${version}/intel-igc-opencl-devel_${version}_amd64.deb \
		data.tar.gz | bsdtar -x -f -
	ar p ${XBPS_SRCDISTDIR}/${pkgname}-${version}/intel-igc-opencl_${version}_amd64.deb \
		data.tar.gz | bsdtar -x -f -
	mkdir -p usr/local/include/igc
	mv usr/local/include/opencl-c{,-base}.h usr/local/include/igc
	mv usr/local/{bin,include,lib} usr
}

do_install() {
	vmkdir usr
	vcopy ${wrksrc}/usr/* usr
	vlicense ${FILESDIR}/LICENSE
}
